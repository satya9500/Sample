<% include partials/header.ejs %>
<div class="container">
  <form action="/add" method="POST" id="myform">
    <label for="name">Name of Item</label>
    <input type="text" class="form-group form-control" name="name" id="name" />
    <label for="name">Type of Item</label>
    <input type="text" class="form-group form-control" name="type" id="type" />
    <label for="name">Quantity</label>
    <input
      type="text"
      class="form-group form-control"
      name="quantity"
      id="quantity"
    />
    <label for="name">Price</label>
    <input
      type="text"
      class="form-group form-control"
      name="price"
      id="price"
    />
    <button class="form-control btn btn-success" type="submit">Submit</button>
  </form>
</div>
<script>
  $("#myform").submit(function(e) {
    e.preventDefault();
    var data = new FormData(document.getElementById("myform"));

    let jsonObject = {};

    for (const [key, value] of data.entries()) {
      jsonObject[key] = value;
    }
    jsonObject2 = JSON.stringify(jsonObject);
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://localhost:5000/add");
    xhr.setRequestHeader("Content-type", "application/json; charset=utf-8");
    xhr.send(jsonObject2);
    console.log(jsonObject2);
    window.location.href = "/add";
  });
</script>
